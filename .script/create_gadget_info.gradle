task createGadgetInfo() {
    new File("${projectDir.path}/src/main/groovy/gadget/GadgetInfo.groovy")
        .text = new StringBuilder()
        .append("/* Do Not Modify! Do Not Modify! Do Not Modify! */\n")
        .append("/* This File Is Generated Automatically! */\n")
        .append("package gadget\n")
        .append("\n")
        .append("class GadgetInfo {\n")
        .append("    private GadgetInfo() {}\n")
        .append(getGroupVersion("    "))
        .append(getProjectDef("    "))
        .append("}")
}

def getGroupVersion(String blank) {
    StringBuilder sb = new StringBuilder()
        .append("${blank}// Group & Version.\n")
        .append("${blank}static final String GROUP = \"${GADGET_GROUP}\"\n")
        .append("${blank}static final String VERSION = \"${GADGET_VERSION}\"\n")
    return sb.toString()
}

def getProjectDef(String blank) {
    StringBuilder sb = new StringBuilder()
        .append("${blank}// Project def.\n")
    rootProject.subprojects.each { p ->
        String pName = p.name
        String defName = pName.replace("-", "_").toUpperCase()
        sb.append("${blank}static final String ${defName} = \"${GADGET_GROUP}:${pName}:${GADGET_VERSION}\"\n")
    }
    return sb.toString()
}