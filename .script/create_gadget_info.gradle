task createGadgetInfo() {
    new File("${projectDir.path}/gadget/src/main/groovy/gadget/GadgetInfo.groovy")
        .text = new StringBuilder()
        .append("/* Do Not Modify! Do Not Modify! Do Not Modify! */\n")
        .append("/* This File Is Generated Automatically! */\n")
        .append("package gadget\n")
        .append("\n")
        .append("class GadgetInfo {\n")
        .append(getProjectDef("    "))
        .append("}")
}

def getProjectDef(String blank) {
    StringBuilder sb = new StringBuilder()
        .append("${blank}// Project def.\n")
    rootProject.subprojects.each { p ->
        String pName = p.name
        String defName = pName.replace("-", "_").toUpperCase()
        sb.append("${blank}static final String ${defName} = \"${pName}\"\n")
    }
    return sb.toString()
}